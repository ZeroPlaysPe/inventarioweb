<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Precios — InventarioPro</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    /* ===== Estilos solo para esta página ===== */
    .pricing-hero{ display:grid; place-items:center; padding:40px 0 30px; }
    .price-card{
      width:min(560px,92%); text-align:center; padding:24px 22px;
      border:1px solid var(--line, #22303f); border-radius:16px;
      background:var(--bg-2, #0d1420); box-shadow:0 10px 28px rgba(0,0,0,.22);
    }
    .price-title{ margin:0 0 6px; }
    .price{ margin:12px 0 14px; }
    #price-pen{ display:block; font-size:clamp(40px,6vw,52px); font-weight:800; letter-spacing:-.02em; }
    .price-caption{ display:block; margin-top:4px; color:var(--muted,#9aa6b2); font-size:.95rem; }
    .price-usd{ margin-top:6px; color:var(--muted,#9aa6b2); font-size:.9rem; }
    .price-actions{ display:grid; gap:14px; }           /* separación entre botones */
    .price-actions .btn{ width:100%; justify-content:center; }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <header class="navbar">
    <div class="container nav-wrap">
      <a class="brand" href="index.html">InventarioPro</a>
      <nav class="nav-links">
        <a href="index.html#funciones">Funciones</a>
        <a href="pricing.html" class="btn btn-nav">Precios</a>
        <a href="index.html#empresa">Empresa</a>
        <a href="index.html#contacto">Contacto</a>
      </nav>
      <div id="userBox"></div>
      <button class="nav-toggle" aria-label="Menú">☰</button>
    </div>
  </header>

  <main class="container">
    <section class="section-head" style="padding:40px 0 20px">
      <h2>Licencia única</h2>
      <p>Pago simulado: compras una vez y podrás descargar siempre.</p>
    </section>

    <!-- Tarjeta centrada -->
    <section class="pricing-hero">
      <div class="price-card">
        <h3 class="price-title">InventarioPro (Windows)</h3>
        <p class="muted">Incluye 6 meses de actualizaciones y soporte por email</p>

        <div class="price">
          <span id="price-pen">S/ 0</span>
          <span class="price-caption">Pago único</span>
          <div class="price-usd">≈ <span id="price-usd">$49 USD</span> (referencial)</div>
        </div>

        <div id="actions" class="price-actions"></div>
        <p id="msg" class="muted" style="margin-top:10px;font-size:.92rem"></p>
      </div>
    </section>

    <!-- FAQ -->
    <section class="faq" style="padding-bottom:60px">
      <div class="card" style="padding:18px">
        <h3 style="margin:0 0 10px">Preguntas frecuentes</h3>
        <details><summary>¿Necesito cuenta?</summary><p class="muted">Sí. Regístrate/inicia sesión en <a href="account.html">Cuenta</a>.</p></details>
        <details><summary>¿Puedo descargar varias veces?</summary><p class="muted">Sí. Una vez comprada, podrás descargar cuando quieras.</p></details>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer-grid">
      <div class="footer-brand">
        <span class="brand">InventarioPro</span>
        <p>© 2025 InventarioPro</p>
      </div>
    </div>
  </footer>

<script src="js/notify.js"></script>
  <script>
    // Menú móvil
    const toggle=document.querySelector('.nav-toggle');
    const links=document.querySelector('.nav-links');
    toggle?.addEventListener('click',()=>links.classList.toggle('open'));

    // Acciones según sesión y compra
    async function renderActions(){
      const r=await fetch('/api/me'); const j=await r.json();
      const box=document.getElementById('actions');
      const msg=document.getElementById('msg');
      box.innerHTML=''; msg.textContent='';

      if(!j.user){
        // volver aquí tras login
        box.innerHTML = `<a class="btn btn-primary" href="account.html?returnTo=pricing.html">Iniciar sesión o registrarse</a>`;
        return;
      }
      if(j.user.purchased){
        box.innerHTML = `
          <a class="btn btn-primary" href="/download">Descargar aplicación</a>
          <a class="btn btn-ghost" href="account.html">Mi cuenta</a>
        `;
        msg.textContent = 'Tu compra está activa. Puedes descargar cuando quieras.';
      }else{
        box.innerHTML = `
          <a class="btn btn-primary" href="checkout.html">Pagar y descargar</a>
          <a class="btn btn-ghost" href="account.html">Mi cuenta</a>
        `;
      }
    }
    renderActions();

    // Mostrar precio en Soles (PEN) y USD referencial
    const USD_PRICE = 49;     // cambia aquí el precio en USD
    const USD_TO_PEN = 3.80;  // tipo de cambio referencial

    const penAmount = USD_PRICE * USD_TO_PEN;
    const penFmt = penAmount.toLocaleString('es-PE',{ style:'currency', currency:'PEN', maximumFractionDigits:0 });
    const usdFmt = USD_PRICE.toLocaleString('en-US',{ style:'currency', currency:'USD', maximumFractionDigits:0 });

    document.getElementById('price-pen').textContent = penFmt; // ej: S/ 186
    document.getElementById('price-usd').textContent = usdFmt; // ej: $49
  </script>

  <!-- Menú/usuario en el header -->
  <script src="js/auth-ui.js"></script>
</body>
</html>
